{% extends "base.html" %}

{% load static %}

{% block title %}Meetups and Webinars{% endblock %}
{% block content %}
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-semibold mb-6">{{ meetup.title }}</h1>
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
      <p class="text-gray-600 dark:text-gray-400 mb-4">{{ meetup.description }}</p>
      <p class="text-gray-600 dark:text-gray-400 mb-4">Date: {{ meetup.date }}</p>
      <p class="text-gray-600 dark:text-gray-400">Type: {{ meetup.get_event_type_display }}</p>
      <!-- Added type -->
      {% if meetup.event_type == 'in_person' %}
        <p class="text-gray-600 dark:text-gray-400 mb-4">Location: {{ meetup.location }}</p>
      {% endif %}
      {% if meetup.link %}
        <a href="{{ meetup.link }}"
           class="text-blue-600 dark:text-blue-400"
           target="_blank">
          {% if meetup.event_type == 'online' %}
            Join Online Meetup
          {% else %}
            Event Link
          {% endif %}
        </a>
      {% endif %}
      {% if user.is_authenticated and meetup.creator == user %}
        <a href="{% url 'edit_meetup' slug=meetup.slug %}"
           class="text-blue-600 dark:text-blue-400 ml-4">Edit Meetup</a>
      {% endif %}
      <p class="text-gray-600 dark:text-gray-400 mb-4">Creator: {{ meetup.creator.username }}</p>
      {% if user.is_authenticated %}
        {% if user in registrations.values_list('user', flat=True) %}
          <form method="post" action="{% url 'unregister_meetup' meetup.slug %}">
            {% csrf_token %}
            <button type="submit">Unregister</button>
          </form>
        {% else %}
          <form method="post" action="{% url 'register_meetup' meetup.slug %}">
            {% csrf_token %}
            <button type="submit">Register</button>
          </form>
        {% endif %}
      {% endif %}
      <h2 class="text-2xl font-semibold mt-6">Attendees</h2>
      <ul class="list-disc list-inside">
        {% for registration in registrations %}<li>{{ registration.user.username }}</li>{% endfor %}
      </ul>
    </div>
  </div>
{% endblock %}
</html>
